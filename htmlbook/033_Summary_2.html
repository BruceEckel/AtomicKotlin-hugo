<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Atomic Kotlin: Summary_2</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="atomickotlin-html.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
  <a href="http://AtomicKotlin.com/">
    <img src="Banner.png" alt="Atomic Kotlin" class="banner-image">
  </a>
</header>
<h1 id="summary-2">Summary 2</h1>
<blockquote>
<p>This atom summarizes and reviews the atoms from <a target="_blank" href="020_Objects_Everywhere.html">Objects Everywhere</a> through <a target="_blank" href="032_Property_Accessors.html">Property Accessors</a>.</p>
</blockquote>
<p>If you’re an experienced programmer, this is your next atom after <a target="_blank" href="018_Summary_1.html">Summary 1</a>.</p>
<p>Beginning programmers should read this atom and perform the exercises as review. If any information here isn’t clear to you, go back and study the atom for that particular topic.</p>
<p>The topics appear in appropriate order for experienced programmers, which is not the same as the order of the atoms in the book. For example, we start by introducing packages and imports so we can use our minimal test framework for the rest of the atom.</p>
<h2 id="imports-packages-testing">Imports, Packages &amp; Testing</h2>
<p>Any number of reusable library components can be bundled under a single library name using the <code>package</code> keyword:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">// Summary2/ALibrary.kt</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">package</span> <span class="im">com.yoururl.libraryname</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">// Components to reuse ...</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">fun</span> <span class="fu">f</span>() = <span class="st">&quot;result&quot;</span></a></code></pre></div>
<p>You can put multiple components in a single file, or spread components out among multiple files under the same package name. Here we’ve defined <code>f()</code> as the sole component.</p>
<p>To make it unique, the package name conventionally begins with your reversed domain name. In this example, the domain name is <code>yoururl.com</code>.</p>
<p>In Kotlin, the package name can be independent from the directory where its contents are located. Java requires that the directory structure correspond to the fully-qualified package name: in Java, all the content for the package <code>com.yoururl.libraryname</code> should be located under the <code>com/yoururl/libraryname</code> directory. For mixed Kotlin and Java projects, Kotlin’s style guide recommends the same practice. For pure Kotlin projects, put the directory <code>libraryname</code> at the top level of your project’s directory structure.</p>
<p>An <code>import</code> statement brings one or more names into the current namespace:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">// Summary2/UseALibrary.kt</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">import</span> <span class="im">com.yoururl.libraryname.*</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="kw">val</span> <span class="va">x</span> = f()</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">}</a></code></pre></div>
<p>The star after <code>libraryname</code> tells Kotlin to import all the components of a library. Now we can refer to <code>f()</code> without producing an error. You can also select components individually; details are in <a target="_blank" href="025_Imports_and_Packages.html">Imports &amp; Packages</a>.</p>
<p>An important library in this book is <code>atomictest</code>, our simple testing framework. Once it’s imported, you use <code>eq</code> (equals) and <code>neq</code> (not equals) almost as if they were language keywords:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">// Summary2/UsingAtomicTest.kt</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.*</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  <span class="kw">val</span> <span class="va">pi</span> = <span class="fl">3.14</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  <span class="kw">val</span> <span class="va">pie</span> = <span class="st">&quot;A round dessert&quot;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  pi eq <span class="fl">3.14</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">  pie eq <span class="st">&quot;A round dessert&quot;</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">  pie neq <span class="st">&quot;Square&quot;</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">}</a></code></pre></div>
<p>The ability to use <code>eq</code> without any dots or parentheses is called <em>infix notation</em>. <code>atomictest</code> defines <code>eq</code> in a special way, marking it as <code>infix</code>, which makes it possible to call it either in the regular way: <code>pi.eq(3.14)</code>, or using infix notation: <code>pi eq 3.14</code>. <code>eq</code> and <code>neq</code> are assertions of truth which also display the result from the left side of the <code>eq</code> statement, and an error message if the expression on the right of the <code>eq</code> doesn’t agree (or does agree, in the case of <code>neq</code>). This way you see verified results in the source code.</p>
<p><code>atomictest</code> is defined in <a target="_blank" href="102_Appendix_B_AtomicTest.html">Appendix B: AtomicTest</a>, although it uses language features you will not understand at this point in the book.</p>
<h2 id="objects-everywhere">Objects Everywhere</h2>
<p>Kotlin is a <em>hybrid object-functional</em> language: it supports both object-oriented and functional programming paradigms.</p>
<p>Objects contain <code>val</code>s and <code>var</code>s to store data (these are called <em>properties</em>) and they perform operations using functions defined within a class, called <em>member functions</em> (when it’s unambiguous, we just say “functions”). A <em>class</em> defines properties and member functions for what is essentially a new, user-defined data type. When you create a <code>val</code> or <code>var</code> of a class, it’s called <em>creating an object</em> or sometimes <em>creating an instance</em>.</p>
<p>An especially useful type of object is the <em>container</em> or <em>collection</em>: an object that holds other objects. In this book, we primarily use the <code>List</code> because it’s the most general-purpose sequence. Here we perform several operations on a <code>List</code> that holds <code>Double</code>s. <code>listOf()</code> creates a new <code>List</code> from its arguments:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">// Summary2/ListCollection.kt</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.eq</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  <span class="kw">val</span> <span class="va">lst</span> = listOf(<span class="fl">19.2</span>, <span class="fl">88.3</span>, <span class="fl">22.1</span>)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  lst[<span class="dv">1</span>] eq <span class="fl">88.3</span>  <span class="co">// Indexing</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  lst.reversed() eq listOf(<span class="fl">22.1</span>, <span class="fl">88.3</span>, <span class="fl">19.2</span>)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">  lst.sorted() eq listOf(<span class="fl">19.2</span>, <span class="fl">22.1</span>, <span class="fl">88.3</span>)</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">  lst.max() eq <span class="fl">88.3</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">  lst.min() eq <span class="fl">19.2</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">  lst.sum() eq <span class="fl">129.6</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">}</a></code></pre></div>
<p>No <code>import</code> statement is required to use a <code>List</code>. Kotlin uses square brackets for indexing into sequences. Indexing is zero-based.</p>
<p>This example also shows some of the many standard library functions available for <code>List</code>s: <code>sorted()</code>, <code>reversed()</code>, <code>max()</code>, <code>min()</code> and <code>sum()</code>. To understand these functions, use the online <a href="https://kotlinlang.org/docs/reference/">Kotlin documentation</a>.</p>
<p>When you call <code>sorted()</code> or <code>reversed()</code>, the <code>List lst</code> is not modified. Instead, a new <code>List</code> is created and returned, containing the desired result. This approach of never modifying the original object is consistent throughout Kotlin libraries and you should endeavor to follow this pattern when possible.</p>
<h2 id="creating-classes">Creating Classes</h2>
<p>A class definition consists of the <code>class</code> keyword, a name for the class, and an optional body. The body can contain function definitions and property definitions (<code>val</code>s and <code>var</code>s).</p>
<p>This example defines a class without a body, and classes with properties:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">// Summary2/ClassBodies.kt</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">class</span> NoBody</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="kw">class</span> SomeBody {</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  <span class="kw">val</span> <span class="va">name</span> = <span class="st">&quot;Janet Doe&quot;</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="kw">class</span> EveryBody {</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">  <span class="kw">val</span> <span class="va">all</span> = listOf(SomeBody(),</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">    SomeBody(), SomeBody())</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb5-13" data-line-number="13"></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">  <span class="kw">val</span> <span class="va">nb</span> = NoBody()</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">  <span class="kw">val</span> <span class="va">sb</span> = SomeBody()</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">  <span class="kw">val</span> <span class="va">eb</span> = EveryBody()</a>
<a class="sourceLine" id="cb5-18" data-line-number="18">}</a></code></pre></div>
<p>To create an instance of a class, put parentheses after its name, along with arguments if those are required.</p>
<p>Properties within class bodies can be any type. <code>SomeBody</code> contains a property of type <code>String</code>, and <code>EveryBody</code>’s property is a <code>List</code> holding <code>SomeBody</code> objects.</p>
<p>Here’s a class with member functions:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">// Summary2/Temperature.kt</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.eq</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw">class</span> Temperature {</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="kw">var</span> <span class="va">current</span> = <span class="fl">0.0</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  <span class="kw">var</span> <span class="va">scale</span> = <span class="st">&quot;f&quot;</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  <span class="kw">fun</span> <span class="fu">setFahrenheit</span>(<span class="va">now</span>: <span class="dt">Double</span>) {</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">    current = now</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">    scale = <span class="st">&quot;f&quot;</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">  }</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  <span class="kw">fun</span> <span class="fu">setCelsius</span>(<span class="va">now</span>: <span class="dt">Double</span>) {</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">    current = now</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">    scale = <span class="st">&quot;c&quot;</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14">  }</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">  <span class="kw">fun</span> <span class="fu">getFahrenheit</span>(): <span class="dt">Double</span> =</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">    <span class="cf">if</span> (scale == <span class="st">&quot;f&quot;</span>)</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">      current</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">    <span class="cf">else</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19">      current * <span class="fl">9.0</span> / <span class="fl">5.0</span> + <span class="fl">32.0</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20">  <span class="kw">fun</span> <span class="fu">getCelsius</span>(): <span class="dt">Double</span> =</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">    <span class="cf">if</span> (scale == <span class="st">&quot;c&quot;</span>)</a>
<a class="sourceLine" id="cb6-22" data-line-number="22">      current</a>
<a class="sourceLine" id="cb6-23" data-line-number="23">    <span class="cf">else</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24">      (current - <span class="fl">32.0</span>) * <span class="fl">5.0</span> / <span class="fl">9.0</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25">}</a>
<a class="sourceLine" id="cb6-26" data-line-number="26"></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">  <span class="kw">val</span> <span class="va">temp</span> = Temperature()     <span class="co">// [1]</span></a>
<a class="sourceLine" id="cb6-29" data-line-number="29">  temp.setFahrenheit(<span class="fl">98.6</span>)</a>
<a class="sourceLine" id="cb6-30" data-line-number="30">  temp.getFahrenheit() eq <span class="fl">98.6</span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31">  temp.getCelsius() eq <span class="fl">37.0</span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32">  temp.setCelsius(<span class="fl">100.0</span>)</a>
<a class="sourceLine" id="cb6-33" data-line-number="33">  temp.getFahrenheit() eq <span class="fl">212.0</span></a>
<a class="sourceLine" id="cb6-34" data-line-number="34">}</a></code></pre></div>
<p>These member functions are just like the top-level functions we’ve defined <em>outside</em> of classes, except they belong to the class and have unqualified access to the other members of the class—such as <code>current</code> and <code>scale</code>. Member functions can also call other member functions in the class without qualification.</p>
<ul>
<li><strong>[1]</strong> <code>temp</code> is a <code>val</code>, but then we modify the <code>Temperature</code> object. The <code>val</code> definition prevents the reference <code>temp</code> from being reassigned to a new object; it does not restrict the behavior of the object itself.</li>
</ul>
<p>The following two classes are the foundation of a tic-tac-toe game:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">// Summary2/TicTacToe.kt</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.eq</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw">class</span> Cell {</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  <span class="kw">var</span> <span class="va">entry</span> = <span class="ch">&#39; &#39;</span>                 <span class="co">// [1]</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  <span class="kw">fun</span> <span class="kw">set</span>(<span class="va">e</span>: <span class="dt">Char</span>): <span class="dt">String</span> =      <span class="co">// [2]</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    <span class="cf">if</span> (entry == <span class="ch">&#39; &#39;</span> &amp;&amp; (</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">      e == <span class="ch">&#39;X&#39;</span> || e == <span class="ch">&#39;O&#39;</span>)) {</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">      entry = e</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">      <span class="st">&quot;successful move&quot;</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11">    } <span class="cf">else</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12">      <span class="st">&quot;invalid move&quot;</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13">}</a>
<a class="sourceLine" id="cb7-14" data-line-number="14"></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="kw">class</span> Grid {</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">  <span class="kw">val</span> <span class="va">cells</span> = listOf(</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">    listOf(Cell(), Cell(), Cell()),</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">    listOf(Cell(), Cell(), Cell()),</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">    listOf(Cell(), Cell(), Cell())</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">  )</a>
<a class="sourceLine" id="cb7-21" data-line-number="21">  <span class="kw">fun</span> <span class="fu">play</span>(<span class="va">e</span>: <span class="dt">Char</span>, <span class="va">x</span>: <span class="dt">Int</span>, <span class="va">y</span>: <span class="dt">Int</span>): <span class="dt">String</span> =</a>
<a class="sourceLine" id="cb7-22" data-line-number="22">    <span class="cf">if</span> (x &lt; <span class="dv">0</span> || x &gt; <span class="dv">2</span> || y &lt; <span class="dv">0</span> || y &gt; <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-23" data-line-number="23">      <span class="st">&quot;invalid move&quot;</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24">    <span class="cf">else</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25">      cells[x][y].<span class="kw">set</span>(e)            <span class="co">// [3]</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26">}</a>
<a class="sourceLine" id="cb7-27" data-line-number="27"></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb7-29" data-line-number="29">  <span class="kw">val</span> <span class="va">grid</span> = Grid()</a>
<a class="sourceLine" id="cb7-30" data-line-number="30">  grid.play(<span class="ch">&#39;X&#39;</span>, <span class="dv">1</span>, <span class="dv">1</span>) eq <span class="st">&quot;successful move&quot;</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31">  grid.play(<span class="ch">&#39;X&#39;</span>, <span class="dv">1</span>, <span class="dv">1</span>) eq <span class="st">&quot;invalid move&quot;</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32">  grid.play(<span class="ch">&#39;O&#39;</span>, <span class="dv">1</span>, <span class="dv">3</span>) eq <span class="st">&quot;invalid move&quot;</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33">}</a></code></pre></div>
<ul>
<li><p><strong>[1]</strong> The <code>entry</code> property in <code>Cell</code> is a <code>var</code> so it can be modified. The single quotes in the initialization produce a <code>Char</code> type, so all assignments to <code>entry</code> must also be <code>Char</code>s.</p></li>
<li><p><strong>[2]</strong> <code>set()</code> tests that the <code>Cell</code> is available and that you’ve passed the right character; it returns a <code>String</code> result to indicate success or failure.</p></li>
</ul>
<p>The <code>Grid</code> class holds a <code>List</code> containing three <code>List</code>s, each containing three <code>Cell</code>s—a matrix.</p>
<ul>
<li><strong>[3]</strong> <code>play()</code> checks to see if the <code>x</code> and <code>y</code> indices are within range, then indexes into the matrix, relying on the tests performed by <code>set()</code>.</li>
</ul>
<h2 id="constructors">Constructors</h2>
<p>Constructors create new objects. You pass information to a constructor using its argument list, placed in parentheses directly after the class name. A constructor call thus looks like a function call, except that the initial letter of the “function” name is capitalized (assuming the class definition follows the Kotlin style guide) and the return value is an object of the constructor’s class:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">// Summary2/WildAnimals.kt</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.eq</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="kw">class</span> Badger(<span class="va">id</span>: <span class="dt">String</span>, <span class="va">years</span>: <span class="dt">Int</span>) {</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">  <span class="kw">val</span> <span class="va">name</span> = id</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">  <span class="kw">val</span> <span class="va">age</span> = years</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">  <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">toString</span>(): <span class="dt">String</span> {</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">    <span class="kw">return</span> <span class="st">&quot;Badger: $name, age: $age&quot;</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb8-11" data-line-number="11"></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="kw">class</span> Snake(</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">  <span class="kw">var</span> <span class="va">type</span>: <span class="dt">String</span>,</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">  <span class="kw">var</span> <span class="va">length</span>: <span class="dt">Double</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15">) {</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">  <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">toString</span>(): <span class="dt">String</span> {</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">    <span class="kw">return</span> <span class="st">&quot;Snake: $type, length: $length&quot;</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18">  }</a>
<a class="sourceLine" id="cb8-19" data-line-number="19">}</a>
<a class="sourceLine" id="cb8-20" data-line-number="20"></a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="kw">class</span> Moose(</a>
<a class="sourceLine" id="cb8-22" data-line-number="22">  <span class="kw">val</span> <span class="va">age</span>: <span class="dt">Int</span>,</a>
<a class="sourceLine" id="cb8-23" data-line-number="23">  <span class="kw">val</span> <span class="va">height</span>: <span class="dt">Double</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24">) {</a>
<a class="sourceLine" id="cb8-25" data-line-number="25">  <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">toString</span>(): <span class="dt">String</span> {</a>
<a class="sourceLine" id="cb8-26" data-line-number="26">    <span class="kw">return</span> <span class="st">&quot;Moose, age: $age, height: $height&quot;</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27">  }</a>
<a class="sourceLine" id="cb8-28" data-line-number="28">}</a>
<a class="sourceLine" id="cb8-29" data-line-number="29"></a>
<a class="sourceLine" id="cb8-30" data-line-number="30"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb8-31" data-line-number="31">  Badger(<span class="st">&quot;Bob&quot;</span>, <span class="dv">11</span>) eq <span class="st">&quot;Badger: Bob, age: 11&quot;</span></a>
<a class="sourceLine" id="cb8-32" data-line-number="32">  Snake(<span class="st">&quot;Garden&quot;</span>, <span class="fl">2.4</span>) eq</a>
<a class="sourceLine" id="cb8-33" data-line-number="33">    <span class="st">&quot;Snake: Garden, length: 2.4&quot;</span></a>
<a class="sourceLine" id="cb8-34" data-line-number="34">  Moose(<span class="dv">16</span>, <span class="fl">7.2</span>) eq</a>
<a class="sourceLine" id="cb8-35" data-line-number="35">    <span class="st">&quot;Moose, age: 16, height: 7.2&quot;</span></a>
<a class="sourceLine" id="cb8-36" data-line-number="36">}</a></code></pre></div>
<p>The arguments <code>id</code> and <code>years</code> in <code>Badger</code> are only available in the <em>constructor body</em>. The constructor body consists of the lines of code other than function definitions; in this case, it’s the definitions for <code>name</code> and <code>age</code>.</p>
<p>Often you want the constructor arguments to be available in parts of the class other than the constructor body, but to save yourself the trouble of explicitly defining new identifiers as we did with <code>name</code> and <code>age</code>. If you define your arguments as <code>var</code>s or <code>val</code>s in the argument list, they becomes properties and are accessible everywhere in the class. Both <code>Snake</code> and <code>Moose</code> use this approach, and you can see that the constructor arguments are now available inside their respective <code>toString()</code> functions.</p>
<p>Class arguments declared with <code>val</code> cannot be changed, but those declared with <code>var</code> can, as you expect.</p>
<p>Whenever you use an object in a situation that expects a <code>String</code>, Kotlin produces a <code>String</code> representation of that object by calling its <code>toString()</code> member function. To define a <code>toString()</code>, you must understand a new keyword: <code>override</code>. This is necessary (Kotlin insists on it) because <code>toString()</code> is already defined. <code>override</code> tells Kotlin that yes, we do actually want to replace the default <code>toString()</code> with our own definition. The explicitness of <code>override</code> makes this clear to the reader and helps prevent mistakes.</p>
<p>Notice the formatting of the multiline argument list for <code>Snake</code> and <code>Moose</code>—this is the recommended standard when you have too many arguments to fit on one line, for both constructors and functions.</p>
<h2 id="constraining-visibility">Constraining Visibility</h2>
<p>Kotlin provides <em>access modifiers</em> similar to those available in other languages like C++ or Java. These allow component creators to decide what is available to the client programmer. Kotlin’s access levels include <code>public</code>, <code>private</code>, <code>protected</code>, and <code>internal</code>; the latter two are explained later in the book.</p>
<p>An access modifier like <code>public</code> or <code>private</code> appears before the definition for a class, function or property. Each access modifier only controls the access for that particular definition.</p>
<p>A <code>public</code> definition is available to everyone, in particular to the client programmer who uses that component. Thus, any changes to a <code>public</code> definition will impact client code.</p>
<p>If you don’t provide a modifier, your definition is automatically <code>public</code>. For clarity in certain cases, programmers still sometimes redundantly specify <code>public</code>.</p>
<p>Because a <code>private</code> definition is <em>not</em> available to everyone, you can generally change it without concern for the client programmer.</p>
<p>If you define a class, top-level function, or property as <code>private</code>, it is available only inside that same file:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">// Summary2/Boxes.kt</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">private</span> <span class="kw">var</span> <span class="va">count</span> = <span class="dv">0</span>                   <span class="co">// [1]</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw">private</span> <span class="kw">class</span> Box(<span class="kw">val</span> <span class="va">dimension</span>: <span class="dt">Int</span>) { <span class="co">// [2]</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  <span class="kw">fun</span> <span class="fu">volume</span>() =</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">    dimension * dimension * dimension</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">  <span class="kw">override</span> <span class="kw">fun</span> <span class="fu">toString</span>() =</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">    <span class="st">&quot;Box volume: ${volume()}&quot;</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb9-11" data-line-number="11"></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="kw">private</span> <span class="kw">fun</span> <span class="fu">countBox</span>(<span class="va">box</span>: <span class="dt">Box</span>) {        <span class="co">// [3]</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13">  println(<span class="st">&quot;$box&quot;</span>)</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">  count++</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb9-16" data-line-number="16"></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="kw">fun</span> <span class="fu">countBoxes</span>() {</a>
<a class="sourceLine" id="cb9-18" data-line-number="18">  countBox(Box(<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">  countBox(Box(<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">}</a>
<a class="sourceLine" id="cb9-21" data-line-number="21"></a>
<a class="sourceLine" id="cb9-22" data-line-number="22"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">  countBoxes()</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">  println(<span class="st">&quot;$count boxes&quot;</span>)</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">}</a>
<a class="sourceLine" id="cb9-26" data-line-number="26"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb9-27" data-line-number="27"><span class="co">Box volume: 64</span></a>
<a class="sourceLine" id="cb9-28" data-line-number="28"><span class="co">Box volume: 125</span></a>
<a class="sourceLine" id="cb9-29" data-line-number="29"><span class="co">2 boxes</span></a>
<a class="sourceLine" id="cb9-30" data-line-number="30"><span class="co">*/</span></a></code></pre></div>
<p>You can access <code>private</code> properties (<strong>[1]</strong>), classes (<strong>[2]</strong>), and functions (<strong>[3]</strong>) only from other functions and classes in the <code>Boxes.kt</code> file. Kotlin prevents you from accessing <code>private</code> top-level elements from another file, with a message about those being <code>private</code> within that file.</p>
<p>Class members can be <code>private</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">// Summary2/JetPack.kt</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">class</span> JetPack(</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">  <span class="kw">private</span> <span class="kw">var</span> <span class="va">fuel</span>: <span class="dt">Double</span>     // [<span class="va">1</span>]</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">) {</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">  <span class="kw">private</span> <span class="kw">var</span> <span class="va">warning</span> = <span class="kw">false</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7">  <span class="kw">private</span> <span class="kw">fun</span> <span class="fu">burn</span>() =         <span class="co">// [2]</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8">    <span class="cf">if</span> (fuel - <span class="dv">1</span> &lt;= <span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb10-9" data-line-number="9">      fuel = <span class="fl">0.0</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10">      warning = <span class="kw">true</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11">    } <span class="cf">else</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12">      fuel -= <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13">  <span class="kw">public</span> <span class="kw">fun</span> <span class="fu">fly</span>() = burn()    <span class="co">// [3]</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14">  <span class="kw">fun</span> <span class="fu">check</span>() =                <span class="co">// [4]</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15">    <span class="cf">if</span> (warning)               <span class="co">// [5]</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16">      <span class="st">&quot;Warning&quot;</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17">    <span class="cf">else</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18">      <span class="st">&quot;OK&quot;</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19">}</a>
<a class="sourceLine" id="cb10-20" data-line-number="20"></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb10-22" data-line-number="22">  <span class="kw">val</span> <span class="va">jetPack</span> = JetPack(<span class="fl">3.0</span>)</a>
<a class="sourceLine" id="cb10-23" data-line-number="23">  <span class="cf">while</span>(jetPack.check() != <span class="st">&quot;Warning&quot;</span>) {</a>
<a class="sourceLine" id="cb10-24" data-line-number="24">    println(jetPack.check())</a>
<a class="sourceLine" id="cb10-25" data-line-number="25">    jetPack.fly()</a>
<a class="sourceLine" id="cb10-26" data-line-number="26">  }</a>
<a class="sourceLine" id="cb10-27" data-line-number="27">  println(jetPack.check())</a>
<a class="sourceLine" id="cb10-28" data-line-number="28">}</a>
<a class="sourceLine" id="cb10-29" data-line-number="29"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb10-30" data-line-number="30"><span class="co">OK</span></a>
<a class="sourceLine" id="cb10-31" data-line-number="31"><span class="co">OK</span></a>
<a class="sourceLine" id="cb10-32" data-line-number="32"><span class="co">OK</span></a>
<a class="sourceLine" id="cb10-33" data-line-number="33"><span class="co">Warning</span></a>
<a class="sourceLine" id="cb10-34" data-line-number="34"><span class="co">*/</span></a></code></pre></div>
<ul>
<li><p><strong>[1]</strong> <code>fuel</code> and <code>warning</code> are both <code>private</code> properties and can’t be used by non-members of <code>JetPack</code>.</p></li>
<li><p><strong>[2]</strong> <code>burn()</code> is <code>private</code>, and thus only accessible inside <code>JetPack</code>.</p></li>
<li><p><strong>[3]</strong> <code>fly()</code> and <code>check()</code> are <code>public</code> and can be used everywhere.</p></li>
<li><p><strong>[4]</strong> No access modifier means <code>public</code> visibility.</p></li>
<li><p><strong>[5]</strong> Only members of the same class can access <code>private</code> members.</p></li>
</ul>
<p>With <code>private</code>, you can freely change that member without worrying whether it affects another class in the same package, or a client programmer. As a library designer, you’ll typically keep everything as <code>private</code> as possible, and expose only functions and classes you want client programmers to use. In this book, however, we will only use <code>private</code> in special cases, in order to minimize the size and complexity of example listings.</p>
<p>Any function you’re certain is only a <em>helper function</em> can be made <code>private</code> to ensure you don’t accidentally use it elsewhere in the package and thus prohibit yourself from changing or removing the function.</p>
<h2 id="exceptions">Exceptions</h2>
<p>Consider <code>toDouble()</code>, which converts a <code>String</code> to a <code>Double</code>. What happens if you call it for a <code>String</code> that doesn’t translate into a <code>Double</code>?</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co">// Summary2/ToDoubleException.kt</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">  <span class="co">// val i = &quot;$1.9&quot;.toDouble()</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">}</a></code></pre></div>
<p>Uncommenting the line in <code>main()</code> produces an exception. Here, the failing line is commented so we don’t stop the book’s build. The build checks whether each example compiles and runs as expected.</p>
<p>When an exception is thrown, the current path of execution stops, and the exception object ejects from the current context. When an exception isn’t caught, the program aborts and displays a <em>stack trace</em> containing detailed information.</p>
<p>To avoid displaying exceptions by commenting and uncommenting code, we use <code>atomictest.capture()</code>, which stores the exception and compares it to what we expect:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">// Summary2/AtomicTestCapture.kt</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.*</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">  capture {</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">    <span class="st">&quot;$1.9&quot;</span>.toDouble()</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">  } eq <span class="st">&quot;NumberFormatException: &quot;</span> +</a>
<a class="sourceLine" id="cb12-8" data-line-number="8">    <span class="st">&quot;&quot;&quot;For input string: &quot;$1.9&quot;&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9">}</a></code></pre></div>
<p><code>capture()</code> is designed specifically for this book, so that you can see the exception and know that the output has been checked by the book’s build system.</p>
<p>Another strategy when your function can’t successfully produce the expected result is to return <code>null</code>. Later in <a target="_blank" href="041_Nullable_Types.html">Nullable Types</a> we’ll discuss how <code>null</code> affects the type of the resulting expression.</p>
<p>To throw an exception, use the <code>throw</code> keyword followed by the exception you want to throw, along with any arguments it might need. <code>quadraticZeroes()</code> in the following example solves the <a href="https://en.wikipedia.org/wiki/Quadratic_formula">quadratic equation</a> which defines a parabola:</p>
<p><strong>ax<sup>2</sup> + bx + c = 0</strong></p>
<p>The solution is the <em>quadratic formula</em>:</p>
<p><span class="inline-image"> <img src="images/summary2/quadraticFormula.png" /> </span></p>
<p>Our example finds the <em>zeroes</em> of the parabola, where the lines cross the x-axis. There are two limitations for which we throw exceptions:</p>
<ol type="1">
<li><code>a</code> cannot be zero.</li>
<li>For zeroes to exist, <strong>b<sup>2</sup> - 4ac</strong> cannot be negative.</li>
</ol>
<p>If zeroes exist, there are two of them, so we create the <code>Roots</code> class to hold the return values:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">// Summary2/Quadratic.kt</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">import</span> <span class="im">kotlin.math.sqrt</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw">import</span> <span class="im">atomictest.*</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="kw">class</span> Roots(</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">  <span class="kw">val</span> <span class="va">root1</span>: <span class="dt">Double</span>,</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">  <span class="kw">val</span> <span class="va">root2</span>: <span class="dt">Double</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb13-9" data-line-number="9"></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="kw">fun</span> quadraticZeroes(</a>
<a class="sourceLine" id="cb13-11" data-line-number="11">  <span class="va">a</span>: <span class="dt">Double</span>,</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">  <span class="va">b</span>: <span class="dt">Double</span>,</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">  <span class="va">c</span>: <span class="dt">Double</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14">): <span class="dt">Roots</span> {</a>
<a class="sourceLine" id="cb13-15" data-line-number="15">  <span class="cf">if</span> (a == <span class="fl">0.0</span>)</a>
<a class="sourceLine" id="cb13-16" data-line-number="16">    <span class="kw">throw</span> IllegalArgumentException(</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">      <span class="st">&quot;a is zero&quot;</span>)</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">  <span class="kw">val</span> <span class="va">underRadical</span> = b * b - <span class="dv">4</span> * a * c</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">  <span class="cf">if</span> (underRadical &lt; <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb13-20" data-line-number="20">    <span class="kw">throw</span> IllegalArgumentException(</a>
<a class="sourceLine" id="cb13-21" data-line-number="21">      <span class="st">&quot;underRadical is negative&quot;</span>)</a>
<a class="sourceLine" id="cb13-22" data-line-number="22">  <span class="kw">val</span> <span class="va">squareRoot</span> = sqrt(underRadical)</a>
<a class="sourceLine" id="cb13-23" data-line-number="23">  <span class="kw">val</span> <span class="va">root1</span> = (-b - squareRoot) / <span class="dv">2</span> * a</a>
<a class="sourceLine" id="cb13-24" data-line-number="24">  <span class="kw">val</span> <span class="va">root2</span> = (-b + squareRoot) / <span class="dv">2</span> * a</a>
<a class="sourceLine" id="cb13-25" data-line-number="25">  <span class="kw">return</span> Roots(root1, root2)</a>
<a class="sourceLine" id="cb13-26" data-line-number="26">}</a>
<a class="sourceLine" id="cb13-27" data-line-number="27"></a>
<a class="sourceLine" id="cb13-28" data-line-number="28"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb13-29" data-line-number="29">  capture {</a>
<a class="sourceLine" id="cb13-30" data-line-number="30">    quadraticZeroes(<span class="fl">0.0</span>, <span class="fl">4.0</span>, <span class="fl">5.0</span>)</a>
<a class="sourceLine" id="cb13-31" data-line-number="31">  } eq <span class="st">&quot;IllegalArgumentException: &quot;</span> +</a>
<a class="sourceLine" id="cb13-32" data-line-number="32">    <span class="st">&quot;a is zero&quot;</span></a>
<a class="sourceLine" id="cb13-33" data-line-number="33">  capture {</a>
<a class="sourceLine" id="cb13-34" data-line-number="34">    quadraticZeroes(<span class="fl">3.0</span>, <span class="fl">4.0</span>, <span class="fl">5.0</span>)</a>
<a class="sourceLine" id="cb13-35" data-line-number="35">  } eq <span class="st">&quot;IllegalArgumentException: &quot;</span> +</a>
<a class="sourceLine" id="cb13-36" data-line-number="36">    <span class="st">&quot;underRadical is negative&quot;</span></a>
<a class="sourceLine" id="cb13-37" data-line-number="37">  <span class="kw">val</span> <span class="va">roots</span> = quadraticZeroes(<span class="fl">3.0</span>, <span class="fl">8.0</span>, <span class="fl">5.0</span>)</a>
<a class="sourceLine" id="cb13-38" data-line-number="38">  roots.root1 eq <span class="fl">-15.0</span></a>
<a class="sourceLine" id="cb13-39" data-line-number="39">  roots.root2 eq <span class="fl">-9.0</span></a>
<a class="sourceLine" id="cb13-40" data-line-number="40">}</a></code></pre></div>
<p>Here we use the standard exception class <code>IllegalArgumentException</code>. Later we’ll show you how to define your own exception types and to make them specific to your circumstances. Your goal is to generate the most detailed messages possible, to simplify the support of your application in the future.</p>
<h2 id="lists">Lists</h2>
<p><code>List</code>s are Kotlin’s basic sequential container type, and are part of the standard Kotlin package so they’re available without any imports. You create an immutable list using <code>listOf()</code> and a mutable list using <code>mutableListOf()</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co">// Summary2/MustableVsImmutableList.kt</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.eq</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">  <span class="kw">val</span> <span class="va">ints</span> = listOf(<span class="dv">99</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">13</span>)</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="co">// ints.add(9) // &#39;add()&#39; not available</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7">  <span class="cf">for</span> (i <span class="kw">in</span> ints)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">    <span class="cf">if</span>(i &gt; <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">      println(i)</a>
<a class="sourceLine" id="cb14-10" data-line-number="10">  <span class="kw">val</span> <span class="va">chars</span> = mutableListOf(<span class="ch">&#39;i&#39;</span>, <span class="ch">&#39;j&#39;</span>, <span class="ch">&#39;k&#39;</span>)</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">  chars.add(<span class="ch">&#39;l&#39;</span>) <span class="co">// &#39;add()&#39; available</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12">  println(chars)</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">  chars.remove(<span class="ch">&#39;k&#39;</span>)</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">  println(chars)</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">  chars.clear()</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">  println(chars)</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">}</a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">99</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">13</span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">[i, j, k, l]</span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">[i, j, l]</span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">[]</span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">*/</span></a></code></pre></div>
<p><code>add()</code>, and all other modification functions, do not work with <code>ints</code> because <code>ints</code> is immutable, and those functions are not part of a plain <code>List</code>. <code>for</code> loops work well with <code>List</code>s: <code>for(i in ints)</code> means <code>i</code> gets each value in <code>ints</code>.</p>
<p><code>chars</code> is created as a <code>MutableList</code> and thus it can be directly modified using fucntions like <code>add()</code>, <code>remove()</code> and <code>clear()</code>.</p>
<p>Next, we create a <code>List</code> of <code>String</code>s by breaking up a triple-quoted paragraph, then show the power of some of the library functions, and the ability to chain those functions together:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co">// Summary2/ListOfStrings.kt</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">  <span class="kw">val</span> <span class="va">jabber</span> = <span class="st">&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="st">    Twas brillig, and the slithy toves</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="st">      Did gyre and gimble in the wabe:</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="st">    All mimsy were the borogoves,</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="st">      And the mome raths outgrabe.</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="st">  &quot;&quot;&quot;</span>.trim().split(Regex(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">W+&quot;</span>))</a>
<a class="sourceLine" id="cb15-10" data-line-number="10"></a>
<a class="sourceLine" id="cb15-11" data-line-number="11">  println(jabber.take(<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">  println(jabber.slice(<span class="dv">6</span>..<span class="dv">12</span>))</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">  println(jabber.slice(<span class="dv">6</span>..<span class="dv">18</span> step <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">  println(jabber.sorted().takeLast(<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">  println(</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">    jabber.sorted().distinct().takeLast(<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">}</a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">[Twas, brillig, and, the, slithy]</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">[Did, gyre, and, gimble, in, the, wabe]</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">[Did, and, in, wabe, mimsy, the, And]</span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">[the, the, toves, wabe, were]</span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">[slithy, the, toves, wabe, were]</span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">*/</span></a></code></pre></div>
<p>The call to <code>split()</code> breaks the <code>String</code> according to its argument. In this case we use a <code>Regex</code> object, which creates a <em>regular expression</em>—a pattern that matches the parts to split. <code>\W</code> is a special pattern (the required extra <code>\</code> comes from Java) that means “not a word character,” and <code>+</code> means “one or more of the preceeding.” Thus <code>split()</code> will break at one or more non-word characters, and is the perfect formula for breaking a block of text into its component words.</p>
<p>Next we display the beginning of the <code>List</code> using <code>take(n)</code>, which produces a new <code>List</code> containing the first <code>n</code> elements. <code>slice()</code> Produces a new <code>List</code> containing the elements selected by its <code>Range</code> argument, and this <code>Range</code> can include a <code>step</code>.</p>
<p>Note the name <code>sorted()</code> instead of <code>sort()</code>. When you call <code>sorted()</code> it <em>produces</em> a sorted <code>List</code>, leaving the original <code>List</code> alone. <code>sort()</code> only works with a <code>MutableList</code>, and that list is changed directly (a.k.a. <em>sorted in place</em>).</p>
<p>As the name implies, <code>takeLast(n)</code> produces a new <code>List</code> of the last <code>n</code> elements. You can see from the output that “the” is duplicated. This is eliminated by adding the <code>distinct()</code> function to the call chain.</p>
<h2 id="parameterized-types">Parameterized Types</h2>
<p>Sometimes Kotlin’s type inference requires help. In other cases, you you might want to be explicit about the type, for readability’s sake. Here, we tell Kotlin that <code>numbers</code> contain a <code>List</code> of <code>Int</code>s, while <code>strings</code> contain a <code>List</code> of <code>String</code>s:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co">// Summary2/ExplicitTyping.kt</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.eq</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">  <span class="kw">val</span> <span class="va">numbers</span>: List&lt;<span class="kw">Int</span>&gt; = listOf(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">  <span class="kw">val</span> <span class="va">strings</span>: List&lt;<span class="kw">String</span>&gt; =</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">    listOf(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>)</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">  numbers eq <span class="st">&quot;[1, 2, 3]&quot;</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9">  strings eq <span class="st">&quot;[one, two, three]&quot;</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10">  toCharList(<span class="st">&quot;seven&quot;</span>) eq <span class="st">&quot;[s, e, v, e, n]&quot;</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb16-12" data-line-number="12"></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="kw">fun</span> <span class="fu">toCharList</span>(<span class="va">s</span>: <span class="dt">String</span>): <span class="dt">List</span>&lt;<span class="dt">Char</span>&gt; =</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">  s.toList()</a></code></pre></div>
<p>For both the <code>numbers</code> and <code>strings</code> definitions, we add colons and the type declarations <code>List&lt;Int&gt;</code> and <code>List&lt;String&gt;</code>. The angle brackets denote a <em>type parameter</em>, allowing us to say, “the container holds objects of the type ‘parameter’.” You typically pronounce <code>List&lt;Int&gt;</code> as “list of <code>Int</code>.”</p>
<p>A return value can also have a type parameter, as seen in <code>toCharList()</code>. You can’t just say it returns a <code>List</code>; Kotlin will complain, so you must give the type parameter as well.</p>
<h2 id="vararg-arguments"><code>vararg</code> Arguments</h2>
<p>The <code>vararg</code> keyword defines a function that takes any number of arguments. <code>vararg</code> is short for <em>variable argument list</em>, and allows you to pass any number of arguments of the specified type, including zero. The <code>vararg</code> becomes an <code>Array</code>, which is very similar to a <code>List</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co">// Summary2/VarArgs.kt</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw">fun</span> <span class="fu">varargs</span>(<span class="va">s</span>: <span class="dt">String</span>, <span class="kw">vararg</span> <span class="va">ints</span>: <span class="dt">Int</span>) {</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">  <span class="cf">for</span>(i <span class="kw">in</span> ints)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">    print(<span class="st">&quot;$i &quot;</span>)</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">  println(s)</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb17-8" data-line-number="8"></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">  varargs(<span class="st">&quot;primes&quot;</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">13</span>, <span class="dv">17</span>, <span class="dv">19</span>, <span class="dv">23</span>)</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">5 7 11 13 17 19 23 primes</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co">*/</span></a></code></pre></div>
<p>A function definition may specify only one argument as <code>vararg</code>. Any argument in the list can be the <code>vararg</code>, but it’s usually simplest to do it for the last one.</p>
<p>You can pass an <code>Array</code> of elements wherever a <code>vararg</code> is accepted. To create an array, use <code>arrayOf()</code> in the same way you use <code>listOf()</code>. Note that an <code>Array</code> is always mutable. To convert an <code>Array</code> into a sequence of arguments (not just a single element of type <code>Array</code>), use the <em>spread operator</em>, <code>*</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co">// Summary2/ArraySpread.kt</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">  <span class="kw">val</span> <span class="va">array</span> = intArrayOf(<span class="dv">4</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">  varargs(<span class="st">&quot;x&quot;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, *array, <span class="dv">6</span>)  <span class="co">// [1]</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6">  <span class="kw">val</span> <span class="va">list</span> = listOf(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">  varargs(</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">    <span class="st">&quot;y&quot;</span>, <span class="dv">7</span>, <span class="dv">8</span>, *list.toIntArray())  <span class="co">// [2]</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co">1 2 3 4 5 6 x</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">7 8 9 10 11 y</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="co">*/</span></a></code></pre></div>
<p>If you pass an array of primitive types as in the example above, the <code>Array</code> creation function must be specifically typed. If you choose <code>arrayOf(4, 5)</code> instead of <code>intArrayOf(4, 5)</code>, the line <code>[1]</code> will produce an error complaining that <strong><em>inferred type is Array<Int> but IntArray was expected</em></strong>.</p>
<p>The spread operator only works with arrays. If you have a <code>List</code> that you want to pass as a sequence of arguments, first convert it to an array and then apply the spread operator, as in <strong>[2]</strong>. Because the result is again an array of a primitive type, we must use the specific conversion function <code>toIntArray()</code>.</p>
<h2 id="sets">Sets</h2>
<p>A <code>Set</code> is a collection that allows only one element of each value, and automatically prevents duplicates.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co">// Summary2/ColorSet.kt</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw">import</span> <span class="im">atomictest.eq</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="kw">val</span> <span class="va">colors</span> = <span class="st">&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="st">  Yellow Red Blue Green Orange Cyan</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="st">&quot;&quot;&quot;</span>.split(Regex(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">W+&quot;</span>)).sorted()      <span class="co">// [1]</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">  println(colors)</a>
<a class="sourceLine" id="cb19-10" data-line-number="10">  <span class="kw">val</span> <span class="va">iSet</span> = colors.toSet() - <span class="st">&quot;&quot;</span>       <span class="co">// [2]</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11">  println(iSet)</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">  println(iSet + iSet)                 <span class="co">// [3]</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13">  <span class="kw">val</span> <span class="va">mSet</span> = iSet.toMutableSet()       <span class="co">// [4]</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14">  mSet += colors.slice(<span class="dv">3</span>..<span class="dv">5</span>)           <span class="co">// [5]</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15">  println(mSet)</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">  <span class="co">// Set membership:</span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17">  println(<span class="st">&quot;Red&quot;</span> <span class="kw">in</span> iSet)               <span class="co">// [6]</span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18">  println(iSet.contains(<span class="st">&quot;Chartreuse&quot;</span>))</a>
<a class="sourceLine" id="cb19-19" data-line-number="19">}</a>
<a class="sourceLine" id="cb19-20" data-line-number="20"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb19-21" data-line-number="21"><span class="co">[, , Blue, Cyan, Green, Orange, Red, Yellow]</span></a>
<a class="sourceLine" id="cb19-22" data-line-number="22"><span class="co">[Blue, Cyan, Green, Orange, Red, Yellow]</span></a>
<a class="sourceLine" id="cb19-23" data-line-number="23"><span class="co">[Blue, Cyan, Green, Orange, Red, Yellow]</span></a>
<a class="sourceLine" id="cb19-24" data-line-number="24"><span class="co">[Blue, Cyan, Green, Orange, Red, Yellow]</span></a>
<a class="sourceLine" id="cb19-25" data-line-number="25"><span class="co">true</span></a>
<a class="sourceLine" id="cb19-26" data-line-number="26"><span class="co">false</span></a>
<a class="sourceLine" id="cb19-27" data-line-number="27"><span class="co">*/</span></a></code></pre></div>
<ul>
<li><p><strong>[1]</strong> A triple-quoted <code>String</code> is <code>split()</code> using a <code>Regex</code> <em>regular expression</em> object. The special regular expression pattern <code>\W+</code> (the additional <code>\</code> is required by Java) means “any non-word character” (<code>\W</code>) occurring one or more times (<code>+</code>). We then sort the resulting <code>List</code>. Note there are two empty <code>String</code>s when <code>colors</code> is displayed.</p></li>
<li><p><strong>[2]</strong> When <code>colors</code> is copied into the immutable <code>Set iSet</code>, one of the two empty <code>String</code>s is removed, because it is a duplicate. By “subtracting” an empty <code>String</code> using <code>- &quot;&quot;</code>, the other one is removed.</p></li>
<li><p><strong>[3]</strong> Here we create and display a new <code>Set</code> using the <code>+</code> operator. However, placing duplicate items into a <code>Set</code> automatically removes those duplicates, so the output is the same as the previous line.</p></li>
<li><p><strong>[4]</strong> You can easily produce a <code>MutableSet</code> from an immutable <code>Set</code> using <code>toMutableSet()</code>.</p></li>
<li><p><strong>[5]</strong> The operators <code>+=</code> and <code>-=</code> add and remove elements to <code>MutableSet</code>s, just as with <code>MutableList</code>s.</p></li>
<li><p><strong>[6]</strong> You test for <code>Set</code> membership using <code>in</code> or <code>contains()</code></p></li>
</ul>
<p>The normal mathematical set operations such as union, intersection, difference, etc., are all available.</p>
<h2 id="maps">Maps</h2>
<p>A <code>Map</code> connects <em>keys</em> to <em>values</em> and looks up a value when given a key. You create a <code>Map</code> by providing key-value pairs to <code>mapOf()</code>. Each key is separated from its associated value by <code>to</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co">// Summary2/ASCIIMap.kt</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">  <span class="kw">val</span> <span class="va">ascii</span> = mapOf(</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">    <span class="st">&quot;A&quot;</span> to <span class="dv">65</span>,</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">    <span class="st">&quot;B&quot;</span> to <span class="dv">66</span>,</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">    <span class="st">&quot;C&quot;</span> to <span class="dv">67</span>,</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">    <span class="st">&quot;D&quot;</span> to <span class="dv">68</span>,</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">    <span class="st">&quot;I&quot;</span> to <span class="dv">73</span>,</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">    <span class="st">&quot;J&quot;</span> to <span class="dv">74</span>,</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">    <span class="st">&quot;K&quot;</span> to <span class="dv">75</span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12">  )</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">  println(ascii)</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">  println(ascii[<span class="st">&quot;B&quot;</span>])                <span class="co">// [1]</span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15">  println(ascii.keys)</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">  println(ascii.values)</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">  <span class="cf">for</span> (entry <span class="kw">in</span> ascii)               <span class="co">// [2]</span></a>
<a class="sourceLine" id="cb20-18" data-line-number="18">    print(<span class="st">&quot;${entry.key}:${entry.value},&quot;</span>)</a>
<a class="sourceLine" id="cb20-19" data-line-number="19">  println()</a>
<a class="sourceLine" id="cb20-20" data-line-number="20">  <span class="cf">for</span> ((key, value) <span class="kw">in</span> ascii)        <span class="co">// [3]</span></a>
<a class="sourceLine" id="cb20-21" data-line-number="21">    print(<span class="st">&quot;$key:$value,&quot;</span>)</a>
<a class="sourceLine" id="cb20-22" data-line-number="22">  println()</a>
<a class="sourceLine" id="cb20-23" data-line-number="23">  <span class="kw">val</span> <span class="va">mascii</span> = ascii.toMutableMap()  <span class="co">// [4]</span></a>
<a class="sourceLine" id="cb20-24" data-line-number="24">  mascii.remove(<span class="st">&quot;I&quot;</span>)</a>
<a class="sourceLine" id="cb20-25" data-line-number="25">  println(mascii)</a>
<a class="sourceLine" id="cb20-26" data-line-number="26">  mascii.put(<span class="st">&quot;Z&quot;</span>, <span class="dv">90</span>)</a>
<a class="sourceLine" id="cb20-27" data-line-number="27">  println(mascii)</a>
<a class="sourceLine" id="cb20-28" data-line-number="28">  mascii.clear()</a>
<a class="sourceLine" id="cb20-29" data-line-number="29">  mascii[<span class="st">&quot;A&quot;</span>] = <span class="dv">100</span></a>
<a class="sourceLine" id="cb20-30" data-line-number="30">  println(mascii)</a>
<a class="sourceLine" id="cb20-31" data-line-number="31">}</a>
<a class="sourceLine" id="cb20-32" data-line-number="32"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb20-33" data-line-number="33"><span class="co">{A=65, B=66, C=67, D=68, I=73, J=74, K=75}</span></a>
<a class="sourceLine" id="cb20-34" data-line-number="34"><span class="co">66</span></a>
<a class="sourceLine" id="cb20-35" data-line-number="35"><span class="co">[A, B, C, D, I, J, K]</span></a>
<a class="sourceLine" id="cb20-36" data-line-number="36"><span class="co">[65, 66, 67, 68, 73, 74, 75]</span></a>
<a class="sourceLine" id="cb20-37" data-line-number="37"><span class="co">A:65,B:66,C:67,D:68,I:73,J:74,K:75,</span></a>
<a class="sourceLine" id="cb20-38" data-line-number="38"><span class="co">A:65,B:66,C:67,D:68,I:73,J:74,K:75,</span></a>
<a class="sourceLine" id="cb20-39" data-line-number="39"><span class="co">{A=65, B=66, C=67, D=68, J=74, K=75}</span></a>
<a class="sourceLine" id="cb20-40" data-line-number="40"><span class="co">{A=65, B=66, C=67, D=68, J=74, K=75, Z=90}</span></a>
<a class="sourceLine" id="cb20-41" data-line-number="41"><span class="co">{A=100}</span></a>
<a class="sourceLine" id="cb20-42" data-line-number="42"><span class="co">*/</span></a></code></pre></div>
<ul>
<li><p><strong>[1]</strong> With a <code>Map</code>, the <code>[]</code> operator is used for lookup by handing it a key. You can produce all the keys using <code>keys</code> and all the values using <code>values</code>. <code>keys</code> produces a <code>Set</code> because all keys in a <code>Map</code> must already be unique (otherwise you’d have ambiguity during a lookup).</p></li>
<li><p><strong>[2]</strong> Iterating through a <code>Map</code> produces key-value pairs as map entries.</p></li>
<li><p><strong>[3]</strong> You can unpack them as you iterate.</p></li>
<li><p><strong>[4]</strong> You can create a <code>MutableMap</code> directly using <code>mutableMapOf()</code>. Here, we create a <code>MutableMap</code> from an immutable <code>Map</code> using <code>toMutableMap()</code>. Now we can perform operations that modify <code>mascii</code>, such as <code>remove()</code>, <code>put()</code>, and <code>clear()</code>. You also see the square brackets used to put a new key-value pair into <code>mascii</code>. You can also add a pair by saying <code>map += key to value</code>.</p></li>
</ul>
<h2 id="property-accessors">Property Accessors</h2>
<p>This example appears to be straightforward access to the property <code>i</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co">// Summary2/PropertyReadWrite.kt</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">package</span> <span class="im">summary2</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="kw">import</span> <span class="im">atomictest.eq</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="kw">class</span> Data(<span class="kw">var</span> <span class="va">i</span>: <span class="dt">Int</span>)</a>
<a class="sourceLine" id="cb21-6" data-line-number="6"></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="kw">fun</span> main(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb21-8" data-line-number="8">  <span class="kw">val</span> <span class="va">data</span> = Data(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">  <span class="kw">data</span>.i eq <span class="dv">10</span> <span class="co">// Read the &#39;i&#39; property</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10">  <span class="kw">data</span>.i = <span class="dv">20</span>  <span class="co">// Write to the &#39;i&#39; property</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11">}</a></code></pre></div>
<p>However, the compiler is actually calling functions to perform the read and write operations. The default behavior of those functions is to simply read and write the data stored in <code>i</code>. By writing <em>property accessors</em>, you change the actions that occur during reading and writing.</p>
<p>The accessor used to get the value of a property is called a <em>getter</em>; you create your own getter by defining <code>get()</code>, directly after the property declaration. The accessor used to modify a mutable property is called a <em>setter</em>; you create your own setter by defining <code>set()</code> directly after the property declaration. The order of definition of getters and setters is unimportant, and you can define one without the other.</p>
<p>In the following example, the property accessors imitate the default implementations generated by the compiler and display additional information so you can see that the property accessors are indeed called during reads and writes. We indent the <code>get()</code> and <code>set()</code> functions to visually associate them with the property, but the actual association happens because they are defined directly after that property:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode kotlin"><code class="sourceCode kotlin"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="co">// Summary2/GettersAndSetter.kt</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw">package</span> <span class="im">summary2</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="kw">class</span> GettersAndSetter {</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">  <span class="kw">var</span> <span class="va">i</span>: <span class="kw">Int</span> = <span class="dv">0</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6">    <span class="kw">get</span>() {</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">      println(<span class="st">&quot;get()&quot;</span>)</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">      <span class="kw">return</span> field</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">    }</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">    <span class="kw">set</span>(value) {</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">      println(<span class="st">&quot;set($value)&quot;</span>)</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">      field = value</a>
<a class="sourceLine" id="cb22-13" data-line-number="13">    }</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">}</a>
<a class="sourceLine" id="cb22-15" data-line-number="15"></a>
<a class="sourceLine" id="cb22-16" data-line-number="16"><span class="kw">fun</span> <span class="fu">main</span>(<span class="va">args</span>: <span class="dt">Array</span>&lt;<span class="va">String</span>&gt;) {</a>
<a class="sourceLine" id="cb22-17" data-line-number="17">  <span class="kw">val</span> <span class="va">gs</span> = GettersAndSetter()</a>
<a class="sourceLine" id="cb22-18" data-line-number="18">  gs.i = <span class="dv">2</span></a>
<a class="sourceLine" id="cb22-19" data-line-number="19">  println(gs.i)</a>
<a class="sourceLine" id="cb22-20" data-line-number="20">}</a>
<a class="sourceLine" id="cb22-21" data-line-number="21"><span class="co">/* Output:</span></a>
<a class="sourceLine" id="cb22-22" data-line-number="22"><span class="co">set(2)</span></a>
<a class="sourceLine" id="cb22-23" data-line-number="23"><span class="co">get()</span></a>
<a class="sourceLine" id="cb22-24" data-line-number="24"><span class="co">2</span></a>
<a class="sourceLine" id="cb22-25" data-line-number="25"><span class="co">*/</span></a></code></pre></div>
<p>Inside the getter and setter, the stored value is manipulated indirectly using the <code>field</code> keyword, which is only accessible within these two functions. You can also create a property that doesn’t have a <code>field</code>, but simply calls the getter to produce a result.</p>
<p>If you declare a <code>private</code> property, both accessors become <code>private</code>. You can make the setter <code>private</code> and the getter <code>public</code>. Then you can, for example, read the property outside the class, but only change its value inside the class. Custom property accessors allow control or modification of access to a property.</p>
<p class="copy">
©2018 <a href="http://mindviewllc.com/">Mindview LLC</a>. All Rights Reserved.
</p>
<p><br><br></p>
</body>
</html>
